window.addEventListener("load",function(){function b(){var g=window.location.pathname.split("/")[1];if(g==="archive"){var f=$("section.archive-entry:first");if(f.length>0){var h=f.find("div.date > a > time").attr("datetime");var e=h.split("-")[0];var d=h.split("-")[1];return{year:e,month:d}}return null}}function c(d){var g=d.find(".js-archive-module-calendar-selector");var f=function f(){var j=g.find("option:selected");var h=j.data("year");var i=j.data("month");$.ajax({type:"get",url:URLGenerator.user_blog_url("/archive_module_calendar"),data:{month:i,year:h}}).done(function(k){d.find(".js-archive-module-calendar-container").html(k)})};g.change(function(){f()});var e=b();if(e){g.val(e.year+" "+e.month)}f()}function a(e){var g;var f=b();if(f){var h=f.year;if(h){var d=e.find('li.archive-module-year[data-year="'+h+'"]');g=d.length>0?d:null}}g=g||$("li.archive-module-year:first");g.removeClass("archive-module-year-hidden");e.find(".archive-module-button").click(function(j){j.preventDefault();var i=$(this).parent(".archive-module-year");i.toggleClass("archive-module-year-hidden")})}$(".hatena-urllist li").each(function(){var d=$(this).html().replace(/(\()(\d+)(\))(.*)/g,'<span class="badge">$2</span></li>');$(this).html(d)});$("a .badge").each(function(){var d=$(this).parent();$(this).insertAfter(d)});$(".hatena-module-archive").each(function(){var d=$(this);if(d.data("archiveType")=="calendar"){c(d)}else{a(d)}})},false);